/*! awdl-site 2015-04-02 */
YUI().use("node","event","handlebars","jsonp","router","gallery-paginator","anim",function(a){"use strict";function b(){var a=c("page"),b=c("sort"),d=a?a:1,e=l.getPath()+"?page="+d;return b&&(e=e+"&sort="+b),e}function c(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))}function d(c,d){var e=d.container.getData(),f=e.requesterror;f?(f=parseInt(f,10)+1,d.container.setAttribute("data-requesterror",f)):(d.container.setAttribute("data-requesterror",1),f=1),3>f?l.replace(b()):a.log("onFailure: there was a problem with this request")}function e(){d()}function f(a){this.setPage(a.page,!0),this.setRowsPerPage(a.rowsPerPage,!0),this.setTotalRecords(a.totalRecords,!0),l.save(l.getPath()+"?page="+a.page)}function g(b,c,d){a.one("#paginator").empty();var e={totalRecords:c,rowsPerPage:d,initialPage:b,template:"{FirstPageLink} {PageLinks} {NextPageLink}"},g=new a.Paginator(e);g.on("changeRequest",f),c>d&&g.render("#paginator")}function h(b,c){try{var d=c.container,e=a.one(".resultsnum"),f=c.page?c.page:1,h=parseInt(b.response.numFound,10),i=e.one(".numfound"),j=parseInt(b.response.start,10),l=1>j?1:j+1,m=e.one(".start"),n=e.one(".docslength"),o=parseInt(b.response.docs.length,10),p=a.one("body").getAttribute("data-app"),q=c.rows;g(f,h,q),d.setAttribute("data-numFound",h),d.setAttribute("data-start",j),d.setAttribute("data-docsLength",o),m.set("innerHTML",l),n.set("innerHTML",j+o),i.set("innerHTML",h),d.append(k({items:b.response.docs,app:{appRoot:p}})),c.container.setAttribute("data-requesterror",0),a.one("body").removeClass("io-loading")}catch(r){}}function i(b){var c=0,f=0,g=a.one("#browse-select :checked"),i=g.get("value"),j=g.getAttribute("data-sort-dir"),k=b.container.getData(),l=a.one("body").getAttribute("data-source-discovery"),m=a.one("main").getAttribute("data-tid"),n=k.fl?k.fl:"*",o=k.rows?k.rows:10,p=[];a.log(m),a.one("body").addClass("io-loading");for(var q in k)k.hasOwnProperty(q)&&q.match("fq-")&&p.push(q.replace("fq-","")+":"+k[q]);b.page&&(f=parseInt(b.page,10)),b.start&&(c=parseInt(b.start,10)),b.rows&&(o=parseInt(b.rows,10)),l=l+"?wt=json&json.wrf=callback={callback}&fl="+n+"&fq="+p.join("&fq=")+"&rows="+o+"&start="+c+"&sort="+i+"%20"+j,b.container.empty(),a.jsonp(l,{on:{success:h,failure:d,timeout:e},args:b,timeout:3e3})}var j=a.one("#items").getHTML(),k=a.Handlebars.compile(j),l=new a.Router;l.route(l.getPath(),function(b){var c=a.one('[data-name="items"]'),d=c.getData(),e=b.query.rows?b.query.rows:d.rows?d.rows:10,f=b.query.sort?b.query.sort:d.sort?d.sort:a.one("#browse-select").get("value"),g=b.query.page?parseInt(b.query.page,10):0,h=0;h=1>=g?0:g*e-e,i({container:c,start:h,page:g,rows:e,sort:f})}),l.replace(b())});