function series_pages ( callback , options ) {
	
    var _ = require('underscore');
    
    var request = require('request');

    var fs = require('fs') ;
    
    var conf = JSON.parse( fs.readFileSync ( __dirname + '/conf.json', 'utf8' ) );
    
    var environment = options.parent_conf.environment ;
    
    var template = __dirname + '/series_pages.mustache' ;
    
    request( conf[environment].request.series.src, function ( error, response, body ) {
        if ( !error && response.statusCode == 200 ) {
        	
            var series = JSON.parse( body ) ;
    
            _.each ( series.response.docs , function ( doc ) {
            	
                var data = JSON.parse( doc.zs_data ) ;
                
                doc.data = [];
                   
                _.each ( data.books , function ( book ) { 
                    doc.data.push ( book ) ;
                });
        
                var configuration = {
                    route: '/series/' + doc.ss_identifier + '/index.html',
                    template: template,
                    data: doc
                };
                
                callback ( configuration ) ;
        
            });
        }
    });

}

exports.series_pages = series_pages;
